<!-- OPENSPEC:START -->

# OpenSpec Instructions

These instructions are for AI assistants working in this project.

Always open `@/openspec/AGENTS.md` when the request:

- Mentions planning or proposals (words like proposal, spec, change, plan)
- Introduces new capabilities, breaking changes, architecture shifts, or big performance/security work
- Sounds ambiguous and you need the authoritative spec before coding

Use `@/openspec/AGENTS.md` to learn:

- How to create and apply change proposals
- Spec format and conventions
- Project structure and guidelines

Keep this managed block so 'openspec update' can refresh the instructions.

<!-- OPENSPEC:END -->

# Repository Guidelines

## Project Structure & Module Organization

- `src/`: TypeScript/TSX source for the CLI.
  - `src/cli.tsx`: Pastel entry point that boots the app.
  - `src/commands/`: Ink-based command modules. A command typically exports:
    - `options`: a `zod` schema defining CLI flags and defaults
    - `default`: a React component that renders the UI
- `dist/`: compiled output (generated by `tsc`, gitignored).
- `test.js`: AVA tests (asserts rendered Ink output; imports from `dist/`).

## Build, Test, and Development Commands

- `npm ci`: reproducible install (recommended for CI).
- `npm run dev`: TypeScript watch build to `dist/`.
- `npm run build`: compile `src/` to `dist/`.
- `node dist/cli.js --help`: run the CLI locally after building.
- `npm test`: runs Prettier checks, XO lint, builds, then runs AVA.

## Coding Style & Naming Conventions

- Indentation: tabs (`.editorconfig`); line endings: LF; always end files with a newline.
- Formatting: Prettier using `@vdemedes/prettier-config` (run `npx prettier --write .` when needed).
- Linting: XO with `xo-react` (configured in `package.json`, Prettier-integrated).
- Naming: keep commands in `src/commands/<name>.tsx`; keep the schema named `options`.

## Testing Guidelines

- Framework: AVA + `ink-testing-library`.
- Tests should render command components and assert the final frame output.
- Add new tests next to `test.js` (or migrate to `test/*.test.js` if the suite grows), and keep imports targeting `dist/` (build first).

## Commit & Pull Request Guidelines

- Git history is currently minimal (only “Initial commit”); use Conventional Commits going forward (e.g. `feat: ...`, `fix: ...`).
- PRs should include: summary, rationale, how to test (exact commands), and sample CLI output for user-facing changes.
- Before review: ensure `npm test` passes and `package-lock.json` stays in sync with `package.json`.

## Notes for Agents

- Keep changes focused and small; avoid new dependencies unless required.
- Never commit generated `dist/` artifacts; modify `src/` and rely on `npm run build`.
